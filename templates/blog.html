{% import "base.html" as base %}
{% extends "base.html" %}

{% block head_meta %}
<meta name="description" content="{{ page.summary | striptags }}">
<meta name="author" content="{% if page.authors | length == 1 %}{{ page.authors[0] }}{% else %}{{ page.authors | slice(end = page.authors | length - 1) | join(sep=', ') }} and {{ page.authors | last }}{% endif %}">
<meta property="og:title" content="{{ page.title }}">
<meta property="og:description" content="{{ page.summary | striptags }}">
<meta property="og:type" content="article">
<meta property="og:url" content="{{ page.permalink }}">
<meta property="article:published_time" content="{{ page.date | date(format='%+')}}">
{% if page.updated and page.updated != page.date %}
<meta property="article:published_time" content="{{ page.updated | date(format='%+')}}">
{% endif %}
<meta property="og:image" content="{{ get_url(path='assets/logo.svg') }}">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="{{ page.title }}">
<meta name="twitter:description" content="{{ page.summary | striptags }}">
<meta name="twitter:image" content="{{ get_url(path='assets/logo.svg') }}">
{% endblock head_meta %}

{% block head_extra %}
<!-- KaTeX -->
<link href="{{ get_url(path='vendor/katex/katex.min.css') }}" rel="stylesheet">
<script defer src="{{ get_url(path='vendor/katex/katex.min.js') }}"></script>
<script defer src="{{ get_url(path='vendor/katex/contrib/auto-render.min.js') }}" onload='renderMathInElement(document.body, { delimiters: [ {left: "$$", right: "$$", display: true}, {left: "$", right: "$", display: false}, {left: "\\(", right: "\\)", display: false}, {left: "\\begin{equation}", right: "\\end{equation}", display: true}, {left: "\\begin{align}", right: "\\end{align}", display: true}, {left: "\\begin{alignat}", right: "\\end{alignat}", display: true}, {left: "\\begin{gather}", right: "\\end{gather}", display: true}, {left: "\\begin{CD}", right: "\\end{CD}", display: true}, {left: "\\[", right: "\\]", display: true} ] });'></script>
{% endblock head_extra %}

{% block content %}
<main class="main-content">
  <section class="section">
    <div class="container is-max-desktop">
      <h1 class="title is-2 mb-4">{{ page.title }}</h1>
      <p class="subtitle is-6">
        <span class="author">
          {% if page.authors | length == 1 %}
          {{ page.authors[0] }}
          {% else %}
          {{ page.authors | slice(end = page.authors | length - 1) | join(sep=", ") }}
          and {{ page.authors | last }}
          {% endif %}
        </span> —
        <time datetime="{{ page.date | date(format='%Y-%m-%d') }}">
          {{ page.date | date(format='%B %e, %Y') }}
        </time>
        {% if page.updated and page.updated != page.date %}
        — <time datetime="{{ page.updated | date(format='%Y-%m-%d') }}">
          Updated on {{ page.updated | date(format='%B %e, %Y') }}
        </time>
        {% endif %}
      </p>
      {% if page.toc %}
      <p class="title toc-title is-4 mt-5 mb-3">Table of Contents</p>
      {{ base::toc(toc=page.toc) }}
      {% endif %}
      <hr class="content-separator">
      <div class="content">
        {{ page.content | safe }}
      </div>
    </div>
  </section>
</main>
{% endblock content %}
