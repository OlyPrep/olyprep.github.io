{% macro navbar(fixed="top", compact=false) %}
{% if fixed %}
{% set is_fixed = "is-fixed-" ~ fixed %}
{% else %}
{% set is_fixed = "" %}
{% endif %}
<header>
  <div id="navbar-overlay" class="navbar-overlay"></div>
  <nav class="navbar main-navbar {% if compact %} navbar-compact {% endif %} {{ is_fixed }} is-dark" role="navigation" aria-label="main navigation">
    <div class="container is-max-widescreen">
      <div class="navbar-brand">
        <a class="navbar-item" href="/">
          <img id="brand-logo" src="/assets/logo.svg" alt="OlyPrep Logo">
          <span class="has-text-weight-bold">
            <span id="brand-text"><span id="brand-text-oly">Oly</span><span id="brand-text-prep">Prep</span></span>
          </span>
        </a>
        <a role="button" class="navbar-burger {% if not compact %} is-hidden-desktop {% endif %}" aria-label="menu" aria-expanded="false" data-target="main-nav">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div id="main-nav" class="navbar-menu">
        <div class="navbar-end">
          <a class="navbar-item" href="/">Home</a>
          <div class="navbar-item has-dropdown is-hoverable">
            <a href="/#tracks" class="navbar-link">Tracks</a>
            <div class="navbar-dropdown is-boxed">
              {% set home = get_section(path="_index.md") %}
              {% for track_index in home.subsections %}
              {% set track = get_section(path=track_index) %}
              {% if track.extra.hook_title %}
              <a class="navbar-item" href="{{ track.permalink }}">{{ track.title }}</a>
              {% endif %}
              {% endfor %}
            </div>
          </div>
          <a class="navbar-item" href="/blog">Blog</a>
          <a class="navbar-item" href="/about">About</a>
        </div>
      </div>
    </div>
  </nav>
</header>
{% endmacro navbar %}

{% macro toc(toc, level=1) %}
{% if toc %}
<ul class="toc">
  {% for head in toc %}
  <li>
    <div class="toc-level-{{ level }}">
      <a href="{{ head.permalink | safe }}">{{ head.title }}</a>
    </div>
    {{ base::toc(toc=head.children, level=level + 1) }}
  </li>
  {% endfor %}
</ul>
{% endif %}
{% endmacro sidebar_toc %}

{% macro footer() %}
<footer class="footer">
  <div class="has-text-centered">
    <p class="mb-4">&copy; 2025 OlyPrep contributors.</p>
    <div class="social-links is-size-4">
      <a class="mx-1" href="https://facebook.com/OlyPrep" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f fa-lg"></i></a>
      <a class="mx-1" href="https://youtube.com/@OlyPrep" target="_blank" rel="noopener noreferrer" aria-label="YouTube"><i class="fab fa-youtube fa-lg"></i></a>
      <a class="mx-1" href="https://github.com/OlyPrep" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><i class="fab fa-github fa-lg"></i></a>
    </div>
  </div>
</footer>
{% endmacro footer %}

{% block html %}
<!DOCTYPE html>
<html lang="en" class="{% block html_class %}has-navbar-fixed-top{% endblock html_class %}" data-theme="dark">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
      {% block title %}
      {% if page %}
      {{ page.title }}
      {% elif section %}
      {{ section.title }}
      {% endif %}
      {% endblock title %}
      {% block title_suffix %}
      - OlyPrep
      {% endblock title_suffix %}
    </title>
    <link rel="icon" href="/assets/favico.svg" type="image/svg+xml">
    <!-- Inter Fonts -->
    <link rel="stylesheet" href="{{ get_url(path='vendor/inter/inter.css') }}">
    <!-- Bulma CSS framework -->
    <link rel="stylesheet" href="{{ get_url(path='vendor/bulma/bulma.min.css') }}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{{ get_url(path='vendor/fontawesome/css/all.min.css') }}">
    <!-- KaTeX -->
    <link href="{{ get_url(path='vendor/katex/katex.min.css') }}" rel="stylesheet">
    <script defer src="{{ get_url(path='vendor/katex/katex.min.js') }}"></script>
    <script defer src="{{ get_url(path='vendor/katex/contrib/auto-render.min.js') }}" onload='renderMathInElement(document.body, { delimiters: [ {left: "$$", right: "$$", display: true}, {left: "$", right: "$", display: false}, {left: "\\(", right: "\\)", display: false}, {left: "\\begin{equation}", right: "\\end{equation}", display: true}, {left: "\\begin{align}", right: "\\end{align}", display: true}, {left: "\\begin{alignat}", right: "\\end{alignat}", display: true}, {left: "\\begin{gather}", right: "\\end{gather}", display: true}, {left: "\\begin{CD}", right: "\\end{CD}", display: true}, {left: "\\[", right: "\\]", display: true} ] });'></script>
    <!-- Site stylesheet -->
    <link rel="stylesheet" href="{{ get_url(path='css/style.css') }}">
    {% block head_extra %}{% endblock head_extra %}
  </head>

  <body class="{% block body_class %} main-content-parent {% endblock body_class %}">
    {% block header %}
    {{ self::navbar() }}
    {% endblock header %}
    {% block content %}
    <main class="main-content">
      <div class="container is-max-widescreen">
        {% if page %}
        {{ page.content | safe }}
        {% elif section %}
        {{ section.content | safe }}
        {% endif %}
      </div>
    </main>
    {% endblock content %}
    {% block footer %}
    {{ self::footer() }}
    {% endblock footer %}
    <script src="{{ get_url(path='js/main.js') }}"></script>
    <script src="{{ get_url(path='js/quiz.js') }}"></script>
  </body>
</html>
{% endblock html %}
